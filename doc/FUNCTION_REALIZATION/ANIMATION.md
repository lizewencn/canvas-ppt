# 动画功能实现规划

## 变量参数
- 动画执行的索引
- 需要隐藏元素ID集合
- 当前执行动画的存储集合 `[[{animation}, {animation}], [{animation}]]`，根据动画执行索引和动画的触发方式`trigger`进行分割，取当前索引到`trigger`为`click`单击时的动画集合，按照`trigger`为`after`进行分割，得到示例的执行动画的存储集合
- 判断动画是否正在执行的参数
- 动画执行的时间
- 动画执行的时长


## 函数
### 一、动画启动函数

1、设置`动画是否正在执行的参数`为 true

2、重置`动画执行时间` 和 `动画执行时长`

3、触发`动画执行函数`

### 二、动画执行函数

1、判断动画是执行中的，执行中则进行一下步骤，否则跳过不做处理

2、取`当前执行动画存储集合`的第一个，进行判断修改`需要隐藏元素ID集合`

3、根据`动画执行时间`，算出`动画执行的时长`

4、触发`渲染函数方法`，渲染函数根据`当前执行动画存储集合`的第一个和`动画执行的时长`来修改canvas的状态，平移，旋转，缩放、错切等

5、根据`动画执行的时长`来判断`当前执行动画存储集合`的第一个是否有动画执行完成（动画的时间小于等于动画执行时长），进行完成动画的删除，如果动画为退出动画，这里需要将元素ID加入到`需要隐藏元素ID集合`

6、判断`当前执行动画存储集合`的第一个是否全部执行完成（即长度为 0），如果全部执行完，清除`当前执行动画存储集合`的第一个的删除，重置`动画执行时间` 和 `动画执行时长`

7、判断整个`当前执行动画存储集合`是否执行完成（即长度为0），结束动画执行（触发`动画终止函数`），否则继续触发`动画执行函数`，采用`window.requestAnimationFrame`

### 三、动画终止函数

1、设置`动画是否正在执行的参数`为 false

2、根据`动画执行的索引`处理`需要隐藏元素ID集合`

3、清空`当前执行动画存储集合`

4、重置`动画执行时长`

5、等待一定的时间，再执行一次`渲染函数方法`，如果一开始`动画是否正在执行的参数`就为 false，则跳过

## 逻辑

### 初始化页面
1、重置`变量参数`

2、根据`当前执行动画的存储集合`判断是否要触发`动画启动函数`

### 下一步

1、触发`动画终止函数`

2、改变`动画执行的索引`

3、获取`当前执行动画的存储集合`

4、触发`动画启动函数`

***如果`下一步`触发很快,为了处理动画还没执行完的问题，我们在下一步执行前需要先执行一下`动画终止函数`***

### 上一步

1、触发`动画终止函数`

2、改变`动画执行的索引`

3、根据`动画执行的索引`处理`需要隐藏元素ID集合`
